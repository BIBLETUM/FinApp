package com.yanschool.domain.common_repository

import kotlinx.coroutines.flow.StateFlow

/**
 * Репозиторий для загрузки и предоставления идентификатора текущего аккаунта.
 */
interface AccountIdRepository {

    /**
     * Инициирует загрузку идентификатора аккаунта.
     *
     * Реализация должна выполнить необходимые сетевые или другие операции,
     * чтобы получить идентификатор текущего аккаунта и сохранить его во внутреннем состоянии.
     */
    suspend fun loadAccountId()

    /**
     * Возвращает поток, отслеживающий текущее значение идентификатора аккаунта.
     *
     * Поток выдаёт:
     * - `null`, пока идентификатор не будет загружен или при отсутствии аккаунта;
     * - значение [Int], когда идентификатор успешно загружен.
     *
     * @return [StateFlow] с текущим идентификатором аккаунта или `null`
     */
    fun getCurrentAccountIdFlow(): StateFlow<Int?>

}